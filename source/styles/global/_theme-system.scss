@function config($__key) {
  @if not variable-exists($config) {
    @error 'config: $config variable is not defined.';
  }

  @if not map-has-key($config, $__key) {
    @error 'config: #{$__key} field is not defined.';
  }

  @return map-get($config, $__key);
}

@function color($__color, $__variant: 'default') {
  @if not variable-exists($config) {
    @error 'color: $colors variable is not defined.';
  }

  @if not map-has-key($colors, $__color) {
    @error 'color: Color "#{$__color}" is not defined.';
  }

  $__colorValue: map-get($colors, $__color);

  @if type-of($__colorValue) == 'color' {
    @return $__colorValue;
  }
  @else if type-of($__colorValue) == 'map' {
    @if not map-has-key($__colorValue, $__variant) {
      @error 'color: Variant "#{$__variant}", is not defined';
    }

    $__result: map-get($__colorValue, $__variant);

    @if not type-of($__result) == 'color' {
      @error 'color: Variant "#{}", is not of type color.';
    }

    @return $__result;
  } @else {
    @error 'color: Variant "#{$__variant}" value is not a map or color.';
  }
}